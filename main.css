/* =========================================================
   Expiriti — main.css (SISTEMAS ONLY) v2026.01.04
   Requiere: theme.css (GLOBAL)
   Scope recomendado en HTML: <body class="page-sistemas">
   - Contiene SOLO lo específico de SISTEMAS:
     Hero layouts + PDF + Calculadoras + Icons carousel + ajustes de videos/comparativas
========================================================= */

/* =========================
   0) SCOPE (seguridad)
========================= */
.page-sistemas{scroll-padding-top:84px}
@media(max-width:768px){.page-sistemas{scroll-padding-top:68px}}

/* =========================
   1) HERO (Sistemas)
========================= */
.page-sistemas .hero{padding:18px 0 0}
.page-sistemas .hero-btn{min-width:0}

/* Layout 3 columnas (si lo usas en algunos sistemas) */
.page-sistemas .hero-3col{
  display:grid;
  grid-template-columns:280px 1.55fr 1.05fr;
  column-gap:8px;
  align-items:start;
}
@media(max-width:1200px){
  .page-sistemas .hero-3col{grid-template-columns:270px 1.45fr 1.05fr}
}
@media(max-width:980px){
  .page-sistemas .hero-3col{grid-template-columns:1fr}
}
.page-sistemas .stack-left{display:grid;gap:10px;align-items:start;justify-items:start}

/* PDF (si aplica en algunos sistemas) */
.page-sistemas .pdf-card{margin-left:-6px}
.page-sistemas .pdf-frame{width:100%;height:68vh;border:0}
@media(max-width:980px){.page-sistemas .pdf-frame{height:56vh}}

/* =========================
   2) VIDEOS (carouselVideos)
   - Tu HTML usa #carouselVideos en sistemas
========================= */
.page-sistemas #carouselVideos{min-height:auto}
.page-sistemas #carouselVideos .carousel-track,
.page-sistemas #carouselVideos .carousel-slide{height:auto}
.page-sistemas #carouselVideos .carousel-slide{
  align-items:flex-start;
  justify-content:center;
  box-sizing:border-box;
  padding:0 24px;
}
@media(max-width:768px){
  .page-sistemas #carouselVideos .carousel-slide{padding:0 12px}
}

/* “card” de video (si tu theme no lo define ya) */
.page-sistemas #carouselVideos .yt{
  background:rgba(2,6,23,.35);
  border:1px solid rgba(148,163,184,.25);
  border-radius:14px;
  padding:10px;
  overflow:hidden;
}
.page-sistemas #carouselVideos .yt-wrap{
  position:relative;
  width:100%;
  aspect-ratio:16/9;
  border-radius:12px;
  overflow:hidden;
  background:#000;
  border:1px solid rgba(255,255,255,.08);
}
.page-sistemas #carouselVideos .yt-wrap iframe{
  position:absolute;inset:0;width:100%;height:100%;border:0;display:block;
}

/* Si hay 1 video (yt-grid-single), centrado bonito */
.page-sistemas .yt-grid.yt-grid-single{
  grid-template-columns:minmax(0,1fr);
  max-width:980px;
  margin:0 auto;
}
.page-sistemas .yt-grid.yt-grid-single .yt{
  max-width:820px;
  margin:0 auto;
}

/* =========================
   3) COMPARATIVAS (overflow)
========================= */
.page-sistemas #comparativa .card.body{overflow-x:auto;-webkit-overflow-scrolling:touch}
.page-sistemas #comparativa .table-like{min-width:820px}

/* =========================
   4) CALCULADORAS (Sistemas)
   - Nube / Escritorio
   - Layout 1 / 2 / 3 calculadoras (SIN duplicados)
   - Requiere que tu JS ponga:
     html.has-calc-2 / html.has-calc-3 (o en body)
     y que marque vacías con .calc-empty
========================= */

/* --- Campos comunes (si tu theme no cubre inputs) --- */
.page-sistemas .calc-container label{
  display:block;
  margin-top:6px;
  font-weight:700;
  font-size:13px;
  color:rgba(232,238,246,.92);
}
html[data-theme="light"] .page-sistemas .calc-container label{color:rgba(11,18,32,.92)}

.page-sistemas .calc-container select,
.page-sistemas .calc-container input[type="number"],
.page-sistemas .calc-container input[type="text"]{
  width:100%;
  padding:8px 10px;
  border-radius:10px;
  border:1px solid rgba(148,163,184,.28);
  background:rgba(15,23,42,.45);
  color:inherit;
  margin:6px 0;
}
html[data-theme="light"] .page-sistemas .calc-container select,
html[data-theme="light"] .page-sistemas .calc-container input[type="number"],
html[data-theme="light"] .page-sistemas .calc-container input[type="text"]{
  background:rgba(255,255,255,.88);
  border-color:rgba(2,6,23,.14);
}

/* --- Contenedores calc --- */
.page-sistemas .calc-strip{display:grid;gap:14px;max-width:100%}
.page-sistemas .calc-row{max-width:100%}
.page-sistemas .calc-row>*{min-width:0} /* anti overflow */

.page-sistemas .calc-container{
  border-radius:16px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(15,23,42,.35);
  padding:14px;
  min-height:220px;
  min-width:0;
}

/* Placeholder panel (slot-2 / add-more) */
.page-sistemas .placeholder{
  border-radius:16px;
  border:1px dashed rgba(148,163,184,.28);
  background:rgba(15,23,42,.18);
  padding:14px;
  display:flex;
  align-items:center;
  justify-content:center;
  min-height:180px;
  height:100%;
  min-width:0;
}
.page-sistemas .placeholder .note{
  width:100%;
  max-width:100%;
  text-align:left;
  border:1px dashed rgba(148,163,184,.30);
  background:rgba(17,23,35,.30);
  border-radius:14px;
  padding:14px;
}
.page-sistemas .placeholder .note strong{display:block;line-height:1.25}
.page-sistemas .placeholder .note small{display:block;opacity:.9;margin-top:4px}

/* --- Form grid interno --- */
.page-sistemas .calc-container form{
  display:grid!important;
  grid-template-columns:minmax(0,1fr) minmax(0,1fr)!important;
  gap:12px!important;
  align-items:start;
}
.page-sistemas .calc-container form>*{min-width:0}
.page-sistemas .calc-container .field.lic{grid-column:1!important}
.page-sistemas .calc-container .field.rfc{grid-column:2!important}
.page-sistemas .calc-container .op-label{grid-column:1/-1!important}
.page-sistemas .calc-container .field.usr{grid-column:1!important}
.page-sistemas .calc-container .inst-wrap{grid-column:2!important}

/* instalación checkbox */
.page-sistemas .calc-container .instalacion-box{
  display:flex!important;
  align-items:center!important;
  gap:10px!important;
  padding:10px 12px;
  border:1px dashed rgba(148,163,184,.30);
  border-radius:10px;
  background:rgba(15,23,42,.20);
  flex-wrap:nowrap;
}
.page-sistemas .calc-container .instalacion-box>label{
  display:flex!important;align-items:center!important;gap:10px!important;
  margin:0!important;
}
.page-sistemas .calc-container .instalacion-box input[type="checkbox"]{margin:0!important}
.page-sistemas .calc-container .instalacion-box .inst-hint{
  display:inline;
  margin-left:6px;
  opacity:.85;
  line-height:1.25;
}

/* --- Tabla resultados calc --- */
.page-sistemas .calc-container table{
  width:100%;
  max-width:640px;
  margin:10px auto 0;
  border-collapse:separate;
  border-spacing:0;
  border:1px solid rgba(148,163,184,.20);
  border-radius:12px;
  overflow:hidden;
  background:rgba(15,23,42,.30);
}
.page-sistemas .calc-container thead th{
  text-align:left;
  border-bottom:1px solid rgba(148,163,184,.18);
  padding:12px 14px;
  font-weight:900;
}
.page-sistemas .calc-container td,
.page-sistemas .calc-container th{
  padding:10px 12px;
  border-bottom:1px solid rgba(148,163,184,.14);
}
.page-sistemas .calc-container tr:last-child td{border-bottom:none}
.page-sistemas .calc-container .price,
.page-sistemas .calc-container .total,
.page-sistemas .calc-container .monto{
  font-weight:900;
  text-align:right;
  white-space:nowrap;
  font-variant-numeric:tabular-nums;
  font-feature-settings:"tnum" 1;
}

/* --- Switch nube/escritorio (si lo usas) --- */
.page-sistemas #calc-primary{display:block!important}
.page-sistemas .nube-only{display:none}
.page-sistemas .desk-only{display:none}

.page-sistemas body[data-calc="nube"] .nube-only{display:initial}
.page-sistemas body[data-calc="nube"] .desk-only{display:none!important}

.page-sistemas body[data-calc="escritorio"] .nube-only{display:none!important}
.page-sistemas body[data-calc="escritorio"] .desk-only{display:initial}

/* Nota: si data-calc está en BODY, no en un wrapper:
   usa estos selectores globales seguros */
body[data-calc="nube"] .page-sistemas .pricing-table-nube{display:table}
body[data-calc="nube"] .page-sistemas #calc-slot-2,
body[data-calc="nube"] .page-sistemas #calc-secondary,
body[data-calc="nube"] .page-sistemas #calc-tertiary,
body[data-calc="nube"] .page-sistemas #add-more-panel,
body[data-calc="nube"] .page-sistemas #combined-wrap,
body[data-calc="nube"] .page-sistemas .icons-wrap{display:none!important}

body[data-calc="escritorio"] .page-sistemas .pricing-table-nube{display:none!important}
body[data-calc="escritorio"] .page-sistemas #calc-slot-2,
body[data-calc="escritorio"] .page-sistemas #calc-secondary,
body[data-calc="escritorio"] .page-sistemas #calc-tertiary,
body[data-calc="escritorio"] .page-sistemas #add-more-panel,
body[data-calc="escritorio"] .page-sistemas #combined-wrap,
body[data-calc="escritorio"] .page-sistemas .icons-wrap{display:initial}

/* --- Resumen combinado (si existe) --- */
.page-sistemas #combined-wrap{display:flex;justify-content:center}
.page-sistemas #combined-wrap .combined-summary{
  width:min(720px,100%);
  margin:14px auto 0;
  padding:14px 16px;
  border-radius:14px;
  border:1px solid rgba(148,163,184,.18);
  background:rgba(15,23,42,.22);
}
.page-sistemas #combined-wrap .cs-head{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  margin-bottom:10px;
  flex-wrap:wrap;
}
.page-sistemas #combined-wrap .cs-title{font-weight:900;font-size:14px;opacity:.95}
.page-sistemas #combined-wrap .total-amount{font-size:16px;font-weight:900}
.page-sistemas #combined-wrap .amount-letter{
  border:1px dashed rgba(148,163,184,.26);
  border-radius:12px;
  padding:10px 12px;
  font-weight:800;
  letter-spacing:.2px;
  line-height:1.25;
  white-space:normal;
  word-break:break-word;
  background:rgba(15,23,42,.18);
}
@media(max-width:520px){
  .page-sistemas #combined-wrap .combined-summary{padding:12px}
  .page-sistemas #combined-wrap .total-amount{font-size:15px}
  .page-sistemas #combined-wrap .amount-letter{padding:10px;font-size:13px}
}

/* --- Ocultar calcs vacías (sin :has) --- */
.page-sistemas #calc-secondary.calc-empty,
.page-sistemas #calc-tertiary.calc-empty{
  display:none!important;
  min-height:0!important;
  padding:0!important;
  border:0!important;
  background:transparent!important;
  box-shadow:none!important;
}

/* --- LAYOUT DEFINITIVO 1 / 2 / 3 (SINGLE SOURCE OF TRUTH) --- */
:root{
  /* Ajusta aquí si quieres +/− ancho en sistemas */
  --sys-calc-min:560px;
  --sys-calc-max:760px;
  --sys-panel-min:380px;
  --sys-panel-max:560px;
}

@media(min-width:981px){
  /* 1 calc + panel */
  .page-sistemas .calc-row{
    display:grid!important;
    gap:14px!important;
    grid-template-columns:
      minmax(var(--sys-calc-min),var(--sys-calc-max))
      minmax(var(--sys-panel-min),var(--sys-panel-max))!important;
    justify-content:center!important;
    align-items:stretch!important;
  }

  .page-sistemas #calc-primary{
    width:100%!important;
    max-width:var(--sys-calc-max)!important;
    margin:0!important;
    justify-self:stretch!important;
  }

  .page-sistemas #calc-slot-2{
    width:100%!important;
    max-width:var(--sys-panel-max)!important;
    margin:0!important;
    justify-self:center!important;
    align-self:center!important;
  }

  .page-sistemas #calc-slot-2.placeholder{
    background:transparent!important;
    border:0!important;
    box-shadow:none!important;
    padding:0!important;
    min-height:unset!important;
    height:auto!important;
    display:flex!important;
    align-items:center!important;
    justify-content:center!important;
  }

  /* 2 calcs */
  html.has-calc-2 .page-sistemas .calc-row,
  body.has-calc-2 .page-sistemas .calc-row{
    grid-template-columns:
      minmax(var(--sys-calc-min),var(--sys-calc-max))
      minmax(var(--sys-calc-min),var(--sys-calc-max))!important;
    justify-content:center!important;
    align-items:stretch!important;
  }
  html.has-calc-2 .page-sistemas #calc-secondary,
  body.has-calc-2 .page-sistemas #calc-secondary{
    display:block!important;
    width:100%!important;
    max-width:var(--sys-calc-max)!important;
    margin:0!important;
  }
  html.has-calc-2 .page-sistemas #calc-slot-2,
  body.has-calc-2 .page-sistemas #calc-slot-2{display:none!important}

  html.has-calc-2 .page-sistemas #add-more-panel,
  body.has-calc-2 .page-sistemas #add-more-panel{
    display:flex!important;
    grid-column:1/-1!important;
    justify-content:center!important;
    margin-top:14px!important;
  }
  html.has-calc-2 .page-sistemas #add-more-panel .note,
  body.has-calc-2 .page-sistemas #add-more-panel .note{
    width:min(760px,100%)!important;
    margin:0 auto!important;
    text-align:center!important;
  }

  /* 3 calcs */
  html.has-calc-3 .page-sistemas .calc-row,
  body.has-calc-3 .page-sistemas .calc-row{
    grid-template-columns:
      minmax(420px,1fr)
      minmax(420px,1fr)
      minmax(420px,1fr)!important;
    justify-content:center!important;
    align-items:stretch!important;
  }
  html.has-calc-3 .page-sistemas #calc-secondary,
  body.has-calc-3 .page-sistemas #calc-secondary,
  html.has-calc-3 .page-sistemas #calc-tertiary,
  body.has-calc-3 .page-sistemas #calc-tertiary{
    display:block!important;
    width:100%!important;
    max-width:var(--sys-calc-max)!important;
    margin:0!important;
  }
  html.has-calc-3 .page-sistemas #calc-slot-2,
  body.has-calc-3 .page-sistemas #calc-slot-2,
  html.has-calc-3 .page-sistemas #add-more-panel,
  body.has-calc-3 .page-sistemas #add-more-panel{display:none!important}
}

@media(max-width:980px){
  .page-sistemas .calc-row{
    display:grid!important;
    grid-template-columns:1fr!important;
    gap:14px!important;
    justify-content:stretch!important;
    align-items:stretch!important;
  }
  .page-sistemas #calc-primary,
  .page-sistemas #calc-secondary,
  .page-sistemas #calc-tertiary,
  .page-sistemas #calc-slot-2,
  .page-sistemas #add-more-panel{
    width:100%!important;
    max-width:none!important;
  }
  .page-sistemas .calc-container form{grid-template-columns:1fr!important}
  .page-sistemas .calc-container .field.lic,
  .page-sistemas .calc-container .field.rfc,
  .page-sistemas .calc-container .field.usr,
  .page-sistemas .calc-container .op-label,
  .page-sistemas .calc-container .inst-wrap{grid-column:1!important}
  .page-sistemas .calc-container .instalacion-box{flex-wrap:wrap}
}

/* =========================
   5) ICONS CAROUSEL (Sistemas)
========================= */
.page-sistemas .icons-carousel{
  position:relative;
  max-width:100%;
  margin-top:10px;
  padding:0 50px; /* aire para flechas */
}
.page-sistemas .icons-wrap{
  display:flex!important;
  flex-direction:row!important;
  flex-wrap:nowrap!important;
  align-items:stretch;
  justify-content:flex-start;
  gap:14px;
  overflow-x:auto;
  overflow-y:hidden;
  padding:12px 6px;
  scroll-behavior:smooth;
  -webkit-overflow-scrolling:touch;
  overscroll-behavior-x:contain;
  max-width:100%;
}
.page-sistemas .icons-wrap>*{flex:0 0 auto;min-width:0}
.page-sistemas .sys-icon{
  position:relative;
  flex:0 0 186px;
  max-width:186px;
  min-width:186px;
  min-height:200px;
  display:grid;
  grid-template-rows:auto auto auto;
  gap:8px;
  align-items:center;
  justify-items:center;
  padding:14px;
  border-radius:16px;
  border:1px solid rgba(148,163,184,.20);
  background:rgba(15,23,42,.25);
  cursor:pointer;
  transition:transform .15s ease,border-color .15s ease,box-shadow .15s ease;
  overflow:hidden;
}
.page-sistemas .sys-icon:hover{
  border-color:rgba(96,165,250,.45);
  transform:translateY(-2px);
  box-shadow:0 10px 24px rgba(0,0,0,.25);
}
.page-sistemas .sys-icon.active{
  outline:2px solid rgba(96,165,250,.35);
  border-color:rgba(96,165,250,.55);
}
.page-sistemas .sys-icon img{
  width:90px;height:90px;border-radius:12px;
  object-fit:cover;
  background:rgba(15,23,42,.25);
  border:1px solid rgba(148,163,184,.18);
}
.page-sistemas .sys-icon strong{
  font-size:13px;
  text-align:center;
  white-space:normal;
  overflow-wrap:anywhere;
}
.page-sistemas .sys-icon .sys-price{font-size:12px;opacity:.85}
.page-sistemas .sys-icon .sin15{
  position:absolute;
  top:6px;right:6px;
  border-radius:999px;
  padding:3px 8px;
  font-size:10px;
  background:rgba(239,68,68,.12);
  border:1px solid rgba(239,68,68,.28);
}

.page-sistemas .icons-carousel .arrowCircle{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  z-index:5;
}
.page-sistemas .icons-carousel .arrowCircle.prev{left:8px}
.page-sistemas .icons-carousel .arrowCircle.next{right:8px}

@media(max-width:520px){
  .page-sistemas .icons-carousel{padding:0 46px}
  .page-sistemas .sys-icon{flex-basis:176px;min-width:176px;max-width:176px}
}

/* =========================
   6) Header V7 (.gh) compat (Sistemas)
========================= */
.page-sistemas #gh-header.gh{
  position:fixed;
  top:0;left:0;right:0;
  width:100%;
  z-index:2147483000;
}
html.gh-open,body.gh-open{overflow:hidden!important;height:100%!important}
.page-sistemas #gh-drawer.gh-drawer{
  height:100dvh;
  max-height:100dvh;
  padding-top:env(safe-area-inset-top,0px);
  padding-bottom:env(safe-area-inset-bottom,0px);
  -webkit-overflow-scrolling:touch;
  transform:translate3d(105%,0,0);
  will-change:transform;
}
html.gh-open .page-sistemas #gh-drawer.gh-drawer{transform:translate3d(0,0,0)}

/* =========================
   7) Seguridad: evita flechas sueltas
========================= */
.page-sistemas .carousel,
.page-sistemas .carouselX,
.page-sistemas .icons-carousel,
.page-sistemas .listSlider{position:relative}
body>.arrowCircle{display:none!important}

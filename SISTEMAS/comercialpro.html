<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>CONTPAQi Comercial Pro | Expiriti</title>
<meta name="description" content="CONTPAQi Comercial Pro con Expiriti: Control total de inventarios (lotes, pedimentos, caducidades), compras, ventas, CxC/CxP y facturación CFDI 4.0.">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<link rel="apple-touch-icon" sizes="180x180" href="../IMG/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="../IMG/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="../IMG/favicon-16x16.png">
<link rel="manifest" href="../IMG/site.webmanifest">
<link rel="icon" href="../IMG/favicon.ico">
<link rel="icon" type="image/png" sizes="192x192" href="../IMG/android-chrome-192x192.png">
<link rel="icon" type="image/png" sizes="512x512" href="../IMG/android-chrome-512x512.png">

<style>
:root{
  --bg:#0b0f14;--card:#111723;--muted:#95a2b3;--text:#e8eef6;
  --brand:#2dd4bf;--brand-2:#60a5fa;--ok:#22c55e;--warn:#f59e0b;--err:#ef4444;
  --maxw:1200px;--radius:14px;--shadow:0 10px 30px rgba(0,0,0,.25)
}
*{box-sizing:border-box}
html,body{margin:0;height:100%}
html{scroll-behavior:smooth}
body{
  font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  background:linear-gradient(180deg,#0b0f14 0%, #0d1219 100%); color:var(--text);
  scroll-padding-top:84px;
}
a{color:inherit;text-decoration:none}
img,video,iframe{max-width:100%;display:block}
.container{max-width:var(--maxw);margin:0 auto;padding:0 34px}

/* Header fijo */
header{
  position:sticky; top:0; z-index:1000; width:100%;
  background:rgba(11,15,20,.75); backdrop-filter:saturate(140%) blur(8px);
  border-bottom:1px solid #19202b;
}
.nav{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:12px 0}
.brand{display:flex;align-items:center;gap:10px;font-weight:700}
.brand img{width:38px;height:38px;border-radius:10px;display:block}
.brand small{display:block;font-weight:500;color:var(--muted);font-size:12px;margin-top:2px}
nav ul{list-style:none;display:flex;gap:18px;margin:0;padding:0}
nav a{opacity:.9} nav a:hover{opacity:1}
.cta{display:flex;gap:10px;align-items:center}
.burger{display:none}

/* Botones */
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:8px 12px;border-radius:999px;border:1px solid #1c2533;background:#121a25;box-shadow:var(--shadow);font-weight:700;font-size:14px;cursor:pointer;white-space:nowrap}
.btn-grad-green{background:linear-gradient(145deg,#16a34a,#22c55e);color:#0b0f14;border:none}
.btn-grad-purple{background:linear-gradient(145deg,#7c3aed,#a855f7);color:#fff;border:none}
.btn-grad-blue{background:linear-gradient(145deg,#2563eb,#3b82f6);color:#fff;border:none}
.btn-ghost{background:#121a25;color:#e8eef6}
.btn-outline-gradient{color:#cfe9ff;background:transparent;border:1px solid transparent;position:relative;overflow:hidden}
.btn-outline-gradient::before{content:"";position:absolute;inset:0;padding:1px;border-radius:12px;background:linear-gradient(145deg,var(--brand),var(--brand-2));-webkit-mask:linear-gradient(#000 0 0) content-box,linear-gradient(#000 0 0);-webkit-mask-composite:xor;mask-composite:exclude}

/* Títulos / badges */
.hero{padding:26px 0 0}
h1{font-size:clamp(28px,3.4vw,42px);line-height:1.1;margin:8px 0 14px}
h2,h3,h4{margin:0 0 10px}
.lead{color:#c6d1e3;font-size:18px;max-width:68ch}
.hint{color:#aebbd0;opacity:.9}
.badges{display:flex;flex-wrap:wrap;gap:8px;margin:6px 0 0}
.badge{display:inline-block;padding:6px 10px;border-radius:999px;background:#0f1c2c;border:1px solid #203044;color:#cfe3ff;font-size:12px}
.lock-note{margin:8px 0 0;font-size:12px;color:#94a8c6;display:inline-flex;gap:6px;align-items:center}
.lock-note::before{content:"⚠️";}
section{padding:26px 0;border-top:1px solid #11182725}
.card{background:var(--card);border:1px solid #1c2533;border-radius:16px;overflow:hidden}
.card .body{padding:12px;color:#c8d3e5}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:14px;align-items:start}
.grid-2.align-center{align-items:center}
.grid-3{display:grid;grid-template-columns:repeat(3,1fr);gap:14px}
.stack{display:grid;gap:12px}
.title-gradient{background:linear-gradient(90deg,var(--brand),var(--brand-2));-webkit-background-clip:text;background-clip:text;color:transparent}

/* ===== HERO 3 columnas ===== */
.hero-3col{display:grid;grid-template-columns:280px 1.55fr 1.05fr;column-gap:8px;align-items:start}
@media (max-width:1200px){ .hero-3col{grid-template-columns:270px 1.45fr 1.05fr} }
@media (max-width:980px){ .hero-3col{grid-template-columns:1fr} }
.stack-left{display:grid;gap:10px;align-items:start;justify-items:start}
.pdf-card{margin-left:-6px}
.pdf-frame{width:100%;height:68vh;border:0}
@media (max-width:980px){ .pdf-frame{height:56vh} }

/* Botones Hero (hover) */
.hero-btn {transition: transform .2s ease, box-shadow .2s ease, background .2s ease, border-color .2s ease}
.hero-btn:hover {transform: translateY(-3px); box-shadow: 0 10px 26px rgba(0,0,0,.35)}
.hero-btn.btn-grad-green:hover {box-shadow: 0 10px 26px rgba(34,197,94,.3)}
.hero-btn.btn-grad-purple:hover {box-shadow: 0 10px 26px rgba(168,85,247,.3)}
.hero-btn.btn-grad-blue:hover {box-shadow: 0 10px 26px rgba(59,130,246,.3)}
.hero-btn.btn-ghost:hover {background:#192636;border-color:#2a3c52}

/* ===== Galería portada ===== */
.carousel{position:relative;border-radius:var(--radius);overflow:hidden;border:1px solid #1c2533;background:#0f1622;min-height:420px}
.carousel-track{display:flex;scroll-snap-type:x mandatory;overflow-x:auto;scroll-behavior:smooth;height:calc(100% - 38px)}
.carousel-slide{min-width:100%;width:100%;height:100%;object-fit:cover;display:block;flex-shrink:0}
.carousel-nav{display:flex;gap:8px;justify-content:center;padding:10px;background:#0e1724;border-top:1px solid #1c2533}
.dot{width:10px;height:10px;border-radius:999px;background:#223044;border:none;opacity:.6}
.dot.active{background:linear-gradient(145deg,var(--brand),var(--brand-2));opacity:1}
.arrowCircle{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:999px;border:1px solid #2b3c56;background:linear-gradient(145deg,#0f1a2a,#0f1c2c);display:grid;place-items:center;cursor:pointer;z-index:3;color:#eaf2ff;box-shadow:0 6px 18px rgba(0,0,0,.35)}
.arrowCircle.prev{left:8px}.arrowCircle.next{right:8px}.arrowCircle .chev{font-size:24px;line-height:1}

/* ===== Carrusel de sistemas ===== */
.carouselX{position:relative;border-radius:16px;background:#0e1826;border:1px solid #1c2533;padding:8px}
.carouselX .track{display:flex;gap:12px;overflow:hidden;padding:4px;min-height:220px}
.carouselX .sys{flex:0 0 calc((100% - 24px)/3);background:#0f1622;border:1px solid #1c2533;border-radius:14px;padding:16px;display:flex;flex-direction:column;align-items:center;text-align:center}
.carouselX .sys img{width:72px;height:72px;border-radius:16px;margin:6px auto 10px;background:#101826;object-fit:cover}
.group-dots{display:flex;gap:8px;justify-content:center;margin:8px 0 0 0}
.group-dots .dot.active{background:linear-gradient(145deg,var(--brand),var(--brand-2))}

/* ===== CALCULADORA ===== */
.calc-strip{display:flex;flex-direction:column;gap:12px}
.calc-row{display:grid;grid-template-columns:1fr 1fr;gap:14px;align-items:stretch}
.calc-row.has-three{grid-template-columns:1fr 1fr 1fr}
.calc-container{border:1px solid #1c2533;border-radius:12px;background:#0f1622;padding:12px}
.placeholder{border:1px dashed #26405f;background:#0e1724;border-radius:12px;display:flex;align-items:center;justify-content:center;padding:14px;min-height:180px}
.placeholder .note{text-align:center;color:#b9c8de}
#calc-primary{grid-column:1}
#calc-slot-2,#calc-secondary{grid-column:2}
#calc-tertiary{grid-column:3;display:none}
#add-more-panel{grid-column:1 / -1}

.calc-container h4{margin:0 0 8px}
.calc-container table{width:100%;max-width:640px;margin:0 auto;border-collapse:separate;border-spacing:0;border:1px solid #1e2b3c;border-radius:10px;overflow:hidden;background:#0e1724}
.calc-container thead th{background:#0e1724;color:#dce8ff;text-align:left;border-bottom:1px solid #1e2b3c;font-weight:700}
.calc-container th,.calc-container td{padding:10px 12px;border-bottom:1px solid #1e2b3c}
.calc-container tr:last-child td{border-bottom:none}
.calc-container td:last-child,.calc-container th:last-child{text-align:right}
.calc-container label,.calc-container .control-label{display:block;font-weight:700;color:#cfe3ff;margin:4px 0 4px}
.calc-container select,.calc-container input[type="number"]{width:100%;display:block;padding:8px 10px;border-radius:10px;border:1px solid #243248;background:#0e1724;color:#e8eef6}

/* ===== Pickers: grid 3×N ===== */
.icons-wrap{
  display:grid !important;
  grid-template-columns: repeat(3, minmax(128px, 1fr)) !important;
  gap:12px !important;
  justify-items:center !important;
}
@media (max-width:980px){
  .icons-wrap{ grid-template-columns: repeat(3, minmax(120px, 1fr)) !important; }
}
@media (max-width:680px){
  .icons-wrap{ grid-template-columns: repeat(2, minmax(120px, 1fr)) !important; }
}
.icons-wrap .sys-icon{
  width:100% !important; padding:10px; border-radius:12px;
  border:1px solid #1e2b3c; background:#0e1724; cursor:pointer;
  display:grid; grid-template-rows:auto auto auto; justify-items:center; row-gap:6px;
  transition:transform .12s ease, box-shadow .12s ease, border-color .15s ease, outline-color .12s ease;
}
.icons-wrap .sys-icon:hover{transform:translateY(-2px);box-shadow:0 10px 22px rgba(0,0,0,.25);border-color:#274061}
.icons-wrap .sys-icon.active{outline:2px solid var(--brand)}
.icons-wrap .sys-icon img{width:56px;height:56px;border-radius:12px}
.icons-wrap .sys-icon strong{font-size:12px;text-align:center}
.icons-wrap .sys-icon .sys-price{color:#9fb2cb;font-size:11px}
.icons-wrap .sys-icon .sin15{font-size:10px;font-weight:700;padding:2px 6px;border:1px solid #1e2b3c;border-radius:999px;background:#0e1724;color:#cfe3ff;justify-self:end}

/* ===== Comparativa / FAQ / Footer ===== */
.table-like{width:100%;border-collapse:separate;border-spacing:0;border:1px solid #1e2b3c;border-radius:12px;overflow:hidden}
.table-like th,.table-like td{padding:12px 14px;border-bottom:1px solid #1e2b3c}
.table-like tr:last-child td{border-bottom:none}
.table-like thead th{background:#0e1724;color:#dce8ff;text-align:left}
.table-like .highlight{background:rgba(45,212,191,.08);font-weight:700}

.toc{position:fixed;right:16px;bottom:16px;width:240px;max-height:48vh;overflow:auto;background:rgba(15,24,38,.75);border:1px solid #1c2533;border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:6px;z-index:900;box-shadow:0 10px 24px rgba(0,0,0,.35);backdrop-filter: blur(6px);transition:all .2s ease}
.toc.collapsed{width:auto;max-height:none;padding:6px 10px;border-radius:999px;gap:0}
.toc.collapsed .toc-title,.toc.collapsed a,.toc.collapsed .toc-close{display:none}
.toc-title{font-weight:800;color:#b9c8de;margin-bottom:6px}
.toc a{padding:6px 8px;border-radius:10px;color:#cfe3ff;border:1px solid transparent}
.toc a:hover{border-color:#233347;background:#101b2a}

.faq-wrap{display:grid;gap:10px}
.faq-item{border:1px solid #1e2b3c;border-radius:12px;background:#0f1622;overflow:hidden}
.faq-item>summary{list-style:none;cursor:pointer;padding:12px 14px;font-weight:700;display:flex;align-items:center;gap:8px}
.faq-item>summary::marker{display:none}
.faq-item[open]>summary{background:#0e1724;border-bottom:1px solid #1e2b3c}
.faq-item p{padding:12px 14px;margin:0;color:#cfe3ff}

footer{padding:36px 0 12px;border-top:1px solid #11182725;color:#aebbd0}
.footer-grid{display:grid;gap:18px;grid-template-columns:1.6fr 1.2fr 1.2fr 1fr}
.footer-title{font-weight:700;color:#d8e3f6;margin:0 0 10px}
.contact-list{display:grid;gap:6px;font-size:14px}
.item .ico{width:22px}
.payments-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px;align-items:center}
.payments-grid img{max-height:28px;object-fit:contain;filter:grayscale(1);opacity:.9}
.brands-col{display:grid;gap:10px}
.brand-item img{max-height:26px;object-fit:contain;filter:grayscale(.1);background:#0e1520;border:1px solid #1c2533;border-radius:10px;padding:6px}
.ally-col{display:grid;gap:10px;justify-items:end}
.ally-col img{height:46px;object-fit:contain;background:#0e1520;border:1px solid #1c2533;border-radius:10px;padding:8px}
.footer-bottom{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;margin-top:20px;padding-top:12px;border-top:1px solid #1c2533}

/* Responsive generales */
@media (max-width:980px){
  .grid-2{grid-template-columns:1fr}
  .grid-3{grid-template-columns:1fr}
  nav ul{display:none}
  .burger{display:inline-flex;align-items:center;justify-content:center;width:42px;height:42px;border-radius:10px;border:1px solid #1c2533;background:#101722}
  .mobile{display:none}.mobile.open{display:block}
  .mobile a{display:block;padding:12px 0;border-bottom:1px solid #1c2533}
  .toc{right:10px;bottom:10px;width:86vw}
  .footer-grid{grid-template-columns:1fr}
}

/* ===== Píldoras ===== */
.pillbar{display:flex;flex-wrap:wrap;gap:10px;margin:10px 0 14px}
.pill{
  padding:8px 12px;border-radius:999px;
  border:1px solid #1e2b3c;background:linear-gradient(180deg,#0f1c2c,#0e1724);
  color:#cfe3ff;cursor:pointer;font-weight:700;font-size:13px;
  transition:transform .12s ease, box-shadow .12s ease, background .2s ease
}
.pill:hover{transform:translateY(-1px);box-shadow:0 6px 16px rgba(0,0,0,.25)}
.pill.active{background:linear-gradient(145deg,var(--brand),var(--brand-2));color:#0b0f14;border:none}

/* Grid de features 3 col */
.feature-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
@media (max-width:980px){ .feature-grid{grid-template-columns:1fr 1fr} }
@media (max-width:680px){ .feature-grid{grid-template-columns:1fr} }

.fcard{
  border:1px solid #1e2b3c;border-radius:14px;background:linear-gradient(180deg,#0f1622,#0f1724);
  padding:14px;display:grid;gap:8px;transition:transform .12s ease, box-shadow .12s ease, border-color .15s ease
}
.fcard:hover{transform:translateY(-2px);box-shadow:0 10px 24px rgba(0,0,0,.25);border-color:#284061}
.fhead{display:flex;align-items:center;gap:10px}
.ficon{width:28px;height:28px;border-radius:8px;background:#0e1724;border:1px solid #1e2b3c;object-fit:cover}
.fcard h4{margin:0;font-size:15px}
.fcard p{margin:0;color:#bcd0ea;font-size:14px;line-height:1.35}

/* Slider compacto */
.listSlider{
  position:relative;border-radius:16px;background:linear-gradient(180deg,#0e1826,#0f1622);
  border:1px solid #1c2533;padding:8px;overflow:hidden
}
.listTrack{display:flex;overflow:hidden;scroll-behavior:smooth}
.listPage{min-width:100%;padding:8px}
.listItem{
  display:grid;grid-template-columns:84px 1fr;gap:14px;align-items:center;
  background:#0f1c2c;border:1px solid #152437;border-radius:14px;margin:10px 4px;padding:14px;
  transition:border-color .15s ease, transform .12s ease
}
.listItem:hover{border-color:#254064;transform:translateY(-1px)}
.listIcon{width:84px;height:84px;border-radius:14px;background:#0f1725;display:grid;place-items:center;overflow:hidden}
.listIcon img{width:84px;height:84px;object-fit:cover}
.listItem strong{display:block;font-size:14px;margin-bottom:2px}
.listItem div>div{font-size:13px;color:#b9c8de;line-height:1.35}
#beneficios .arrowCircle{width:40px;height:40px}
#beneficios .arrowCircle .chev{font-size:22px}

/* Reels */
.reel-title{margin-bottom:8px;text-align:center;color:#fff;font-weight:bold;display:none}
.reel-title.active{display:block}
</style>
</head>
<body id="top">
<header>
  <div class="container nav">
    <a href="#top" class="brand" aria-label="Inicio Expiriti">
      <img src="../IMG/expiritilogo.webp" alt="Logo de Expiriti" loading="lazy">
      <div>Expiriti<small>Distribuidor CONTPAQi</small></div>
    </a>
    <nav aria-label="Principal">
      <ul>
        <li><a href="#caracteristicas">¿Por qué CONTPAQi?</a></li>
        <li><a href="#videos">Vídeos</a></li>
        <li><a href="#calculadora-section">Precio</a></li>
        <li><a href="#comparativa">Comparativa</a></li>
        <li><a href="#faq">Preguntas frecuentes</a></li>
        <li><a href="#sesion-guiada">Demo</a></li>
      </ul>
    </nav>
    <div class="cta">
      <a class="btn btn-ghost" href="tel:+525568437918" aria-label="Llamar 55 6843 7918">55 6843 7918</a>
      <a class="btn btn-ghost" href="https://wa.me/5568437918?text=Hola%20Expiriti%2C%20quiero%20informaci%C3%B3n%20de%20CONTPAQi%20Comercial%20Pro" target="_blank" rel="noopener">WhatsApp</a>
      <button class="burger" id="burger" aria-label="Abrir menú">≡</button>
    </div>
  </div>
  <div class="container mobile" id="mobileMenu" aria-label="Menú móvil">
    <a href="#caracteristicas">¿Por qué CONTPAQi?</a>
    <a href="#videos">Vídeos</a>
    <a href="#calculadora-section">Precio</a>
    <a href="#comparativa">Comparativa</a>
    <a href="#faq">Preguntas frecuentes</a>
    <a href="#sesion-guiada">Demo</a>
  </div>
</header>

<main class="container hero">
  <a class="hint" href="https://universalunidad-ux.github.io/unidaduniversal.github.io/#productos" rel="noopener">← Volver a productos</a>
  <div class="lock-note">no borrar esta sección, no tocar, respetar y mantener integro</div>
  <h1>CONTPAQi Comercial Pro <span class="badge">Actualizado 2025</span></h1>

  <div class="badges" role="list" aria-label="Características destacadas">
    <span class="badge" role="listitem">Inventarios Avanzados (Lotes, Pedimentos, Series, Caducidades)</span>
    <span class="badge" role="listitem">Multi-Almacén</span>
    <span class="badge" role="listitem">Compras, Ventas, CxC, CxP</span>
    <span class="badge" role="listitem">Facturación CFDI 4.0</span>
  </div>
  <div class="lock-note">no borrar esta sección, no tocar, respetar y mantener integro</div>

  <section aria-label="Resumen">
    <div class="card body">
      <div class="hero-3col">
        <div class="stack-left">
          <img src="../IMG/comercialpro.webp" alt="Pantalla de CONTPAQi Comercial Pro" style="width:220px;margin-bottom:12px;border-radius:12px" loading="lazy">
          <div class="stack">
            <a class="btn btn-grad-green hero-btn" href="https://wa.me/5568437918?text=Hola%20Expiriti%2C%20quiero%20comprar%20mi%20licencia%20de%20CONTPAQi%20Comercial%20Pro" target="_blank" rel="noopener">Compra ahora</a>
            <a class="btn btn-grad-purple hero-btn" href="https://wa.me/5568437918?text=Quiero%20tramitar%20mi%20prueba%20de%2030%20d%C3%ADas%20de%20CONTPAQi%20Comercial%20Pro" target="_blank" rel="noopener">Tramitar prueba 30 días</a>
            <a class="btn btn-grad-blue hero-btn" href="#sesion-guiada">Sesión guiada 45 min por Zoom</a>
            <a class="btn btn-ghost hero-btn" href="../PDFS/Ficha_Comercial_Pro.pdf" target="_blank" rel="noopener">Ficha técnica (PDF)</a>
            <a class="btn btn-ghost hero-btn" href="#caracteristicas">Resumen ficha técnica</a>
          </div>
        </div>

        <div class="card body pdf-card">
          <img src="../IMG/usas.jpeg" alt="Equipo usando el sistema" style="width:100%;border-radius:10px;margin-bottom:10px" loading="lazy">
          <h4 class="title-gradient" style="margin:0 0 6px">Control Total de tu Ciclo Comercial</h4>
          <p class="hint" style="margin:0 0 8px">Administra desde la compra hasta la cobranza, con control detallado de inventarios y cumplimiento fiscal.</p>
          <iframe class="pdf-frame" title="Guía Comercial Pro (PDF)" src="../PDFS/Checklist%20Sistema%20Contable.pdf#page=1&view=FitH" loading="lazy" referrerpolicy="strict-origin-when-cross-origin"></iframe>
          <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:8px">
            <a class="btn btn-outline-gradient" href="../PDFS/Checklist%20Sistema%20Contable.pdf" target="_blank" rel="noopener">Abrir en pestaña</a>
            <a class="btn btn-outline-gradient" href="../PDFS/Checklist%20Sistema%20Contable.pdf" download>Descargar</a>
          </div>
          <small class="hint">Placeholder: añade tu PDF de Comercial Pro cuando lo tengas.</small>
        </div>

        <aside class="card body">
          <h4 class="title-gradient">Galería</h4>
          <div class="carousel" id="carousel1">
            <button class="arrowCircle prev" aria-label="Anterior"><span class="chev">‹</span></button>
            <div class="carousel-track" role="region" aria-label="Galería de imágenes">
              <img class="carousel-slide" src="../IMG/1pro_placeholder.webp" alt="Control de lotes y pedimentos" loading="lazy">
              <img class="carousel-slide" src="../IMG/2pro_placeholder.webp" alt="Multi-almacén y traspasos" loading="lazy">
              <img class="carousel-slide" src="../IMG/3pro_placeholder.webp" alt="Ciclo completo de compra-venta" loading="lazy">
              <img class="carousel-slide" src="../IMG/4pro_placeholder.webp" alt="Reportes avanzados de utilidad" loading="lazy">
            </div>
            <button class="arrowCircle next" aria-label="Siguiente"><span class="chev">›</span></button>
            <div class="carousel-nav" aria-label="Paginación galería">
              <button class="dot active" aria-label="Slide 1"></button>
              <button class="dot" aria-label="Slide 2"></button>
              <button class="dot" aria-label="Slide 3"></button>
              <button class="dot" aria-label="Slide 4"></button>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <section id="caracteristicas" aria-labelledby="caracteristicas-title">
    <div class="lock-note">no borrar esta sección, no tocar, respetar y mantener integro</div>
    <div class="card body">
      <h3 id="caracteristicas-title" class="title-gradient">Funciones destacadas</h3>

      <div class="pillbar" role="tablist" aria-label="Categorías de características">
        <button class="pill active" data-filter="inventarios" aria-pressed="true">Inventarios Avanzados</button>
        <button class="pill" data-filter="compras_ventas" aria-pressed="false">Compras y Ventas</button>
        <button class="pill" data-filter="finanzas" aria-pressed="false">Finanzas y Reportes</button>
      </div>

      <div class="grid-3 feature-grid">
        <!-- Inventarios -->
        <article class="fcard tag-inventarios"><div class="fhead"><img class="ficon" src="../IMG/ic_lotes.webp" alt="" loading="lazy"><h4>Lotes y Pedimentos</h4></div><p>Controla la trazabilidad de productos importados o por lote.</p></article>
        <article class="fcard tag-inventarios"><div class="fhead"><img class="ficon" src="../IMG/fecha-limite.webp" alt="" loading="lazy"><h4>Series y Caducidades</h4></div><p>Administra números de serie y fechas de caducidad por producto.</p></article>
        <article class="fcard tag-inventarios"><div class="fhead"><img class="ficon" src="../IMG/ic_multi_almacen.webp" alt="" loading="lazy"><h4>Multi-Almacén</h4></div><p>Gestiona existencias y movimientos entre diferentes almacenes.</p></article>
        <article class="fcard tag-inventarios"><div class="fhead"><img class="ficon" src="../IMG/ic_costeo.webp" alt="" loading="lazy"><h4>Costeo Preciso</h4></div><p>Calcula costos por PEPS, UEPS, Promedio, etc.</p></article>
        <article class="fcard tag-inventarios"><div class="fhead"><img class="ficon" src="../IMG/ic_inventario_fisico.webp" alt="" loading="lazy"><h4>Inventario Físico</h4></div><p>Facilita la toma de inventario físico y ajustes.</p></article>
        <article class="fcard tag-inventarios"><div class="fhead"><img class="ficon" src="../IMG/ic_unidades.webp" alt="" loading="lazy"><h4>Unidades de Medida</h4></div><p>Maneja diferentes unidades de compra y venta (caja, pieza, kg).</p></article>

        <!-- Compras y Ventas -->
        <article class="fcard tag-compras_ventas"><div class="fhead"><img class="ficon" src="../IMG/ic_ciclo_compra.webp" alt="" loading="lazy"><h4>Ciclo de Compra</h4></div><p>Desde requisición hasta recepción y pago a proveedores.</p></article>
        <article class="fcard tag-compras_ventas"><div class="fhead"><img class="ficon" src="../IMG/ic_ciclo_venta.webp" alt="" loading="lazy"><h4>Ciclo de Venta</h4></div><p>Cotizaciones, pedidos, remisiones, facturas y cobranza.</p></article>
        <article class="fcard tag-compras_ventas"><div class="fhead"><img class="ficon" src="../IMG/ic_cfdi_40.webp" alt="" loading="lazy"><h4>Facturación CFDI 4.0</h4></div><p>Emite facturas, REP, notas de crédito, carta porte, etc.</p></article>
        <article class="fcard tag-compras_ventas"><div class="fhead"><img class="ficon" src="../IMG/ic_precios_desc.webp" alt="" loading="lazy"><h4>Políticas Comerciales</h4></div><p>Define precios, descuentos y promociones flexibles.</p></article>
        <article class="fcard tag-compras_ventas"><div class="fhead"><img class="ficon" src="../IMG/ic_comisiones.webp" alt="" loading="lazy"><h4>Comisiones de Venta</h4></div><p>Calcula comisiones para tus agentes de venta.</p></article>
        <article class="fcard tag-compras_ventas"><div class="fhead"><img class="ficon" src="../IMG/ic_multimoneda.webp" alt="" loading="lazy"><h4>Multimoneda</h4></div><p>Realiza operaciones de compra y venta en diferentes divisas.</p></article>

        <!-- Finanzas -->
        <article class="fcard tag-finanzas"><div class="fhead"><img class="ficon" src="../IMG/ic_cxc.webp" alt="" loading="lazy"><h4>Cuentas por Cobrar</h4></div><p>Control de saldos, antigüedad, pronóstico de cobranza.</p></article>
        <article class="fcard tag-finanzas"><div class="fhead"><img class="ficon" src="../IMG/ic_cxp.webp" alt="" loading="lazy"><h4>Cuentas por Pagar</h4></div><p>Gestión de saldos, vencimientos y programación de pagos.</p></article>
        <article class="fcard tag-finanzas"><div class="fhead"><img class="ficon" src="../IMG/ic_reportes_avanzados.webp" alt="" loading="lazy"><h4>Reportes Avanzados</h4></div><p>Utilidad, flujo de efectivo, análisis de rentabilidad, etc.</p></article>
        <article class="fcard tag-finanzas"><div class="fhead"><img class="ficon" src="../IMG/ic_contabilizacion.webp" alt="" loading="lazy"><h4>Interfaz Contable</h4></div><p>Genera pólizas detalladas para CONTPAQi Contabilidad.</p></article>
        <article class="fcard tag-finanzas"><div class="fhead"><img class="ficon" src="../IMG/ic_tableros.webp" alt="" loading="lazy"><h4>Tableros de Control</h4></div><p>Visualiza indicadores clave de tu operación comercial.</p></article>
        <article class="fcard tag-finanzas"><div class="fhead"><img class="ficon" src="../IMG/ic_excel_export.webp" alt="" loading="lazy"><h4>Exportación a Excel®</h4></div><p>Exporta reportes y catálogos para análisis personalizado.</p></article>
      </div>
    </div>
  </section>

  <section id="beneficios" aria-label="Por qué usar">
    <div class="grid-2 align-center">
      <div>
        <h2 class="title-gradient">¿Por qué usar Comercial Pro? <span class="badge">Beneficios clave</span></h2>
        <p class="lead">Obtén un control detallado de tu ciclo comercial, optimiza tus inventarios con trazabilidad completa y toma decisiones basadas en información precisa.</p>
        <div class="listSlider">
          <button class="arrowCircle prev" aria-label="Anterior"><span class="chev">‹</span></button>
          <div class="listTrack" role="region" aria-label="Beneficios">
            <div class="listPage">
              <div class="listItem"><div class="listIcon"><img src="../IMG/fecha-limite.webp" alt="" loading="lazy"></div><div><strong>TRAZABILIDAD TOTAL</strong><div>Control preciso con lotes, pedimentos, series y caducidades.</div></div></div>
              <div class="listItem"><div class="listIcon"><img src="../IMG/inventario.webp" alt="" loading="lazy"></div><div><strong>GESTIÓN MULTI-ALMACÉN</strong><div>Controla existencias y traspasos entre tus almacenes.</div></div></div>
              <div class="listItem"><div class="listIcon"><img src="../IMG/informe%20(1).webp" alt="" loading="lazy"></div><div><strong>OPERACIÓN EFICIENTE</strong><div>Integra compras, ventas, inventarios, CxC y CxP.</div></div></div>
            </div>
            <div class="listPage">
              <div class="listItem"><div class="listIcon"><img src="../IMG/presentacion%20(1).webp" alt="" loading="lazy"></div><div><strong>CONOCE TU RENTABILIDAD</strong><div>Calcula costos exactos y analiza la utilidad por producto.</div></div></div>
              <div class="listItem"><div class="listIcon"><img src="../IMG/inventario.webp" alt="" loading="lazy"></div><div><strong>CUMPLE CON EL SAT</strong><div>Facturación CFDI 4.0 y complementos.</div></div></div>
              <div class="listItem"><div class="listIcon"><img src="../IMG/ic_integracion_contpaqi.webp" alt="" loading="lazy"></div><div><strong>ECOSISTEMA CONTPAQi</strong><div>Conecta con Contabilidad, Bancos y Nóminas.</div></div></div>
            </div>
          </div>
          <button class="arrowCircle next" aria-label="Siguiente"><span class="chev">›</span></button>
        </div>
      </div>

      <div>
        <aside class="card body">
          <h4 class="title-gradient" style="margin-bottom: 8px;">Reels Destacados: Comercial Pro</h4>
          <h4 class="reel-title active">Trazabilidad con Lotes</h4>
          <h4 class="reel-title">Control Multi-Almacén</h4>

          <div class="carousel" id="carouselReels">
            <button class="arrowCircle prev" aria-label="Anterior"><span class="chev">‹</span></button>
            <div class="carousel-track">
              <div class="carousel-slide" style="padding: 10px; box-sizing: border-box;">
                <iframe width="100%" height="500"
                  src="https://www.youtube-nocookie.com/embed/PLACEHOLDER_REEL_ID_PRO_1?rel=0&modestbranding=1&controls=1&fs=1"
                  title="Reel CONTPAQi Comercial Pro 1 (Placeholder)"
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  allowfullscreen
                  style="border-radius:12px; display:block; margin:auto; max-width: 300px;">
                </iframe>
              </div>
              <div class="carousel-slide" style="padding: 10px; box-sizing: border-box;">
                <iframe width="100%" height="500"
                  src="https://www.youtube-nocookie.com/embed/PLACEHOLDER_REEL_ID_PRO_2?rel=0&modestbranding=1&controls=1&fs=1"
                  title="Reel CONTPAQi Comercial Pro 2 (Placeholder)"
                  frameborder="0"
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                  allowfullscreen
                  style="border-radius:12px; display:block; margin:auto; max-width: 300px;">
                </iframe>
              </div>
            </div>
            <button class="arrowCircle next" aria-label="Siguiente"><span class="chev">›</span></button>
            <div class="carousel-nav" aria-label="Paginación de galería">
              <button class="dot active" aria-label="Ir al reel 1"></button>
              <button class="dot" aria-label="Ir al reel 2"></button>
            </div>
          </div>
        </aside>
      </div>
    </div>
  </section>

  <section id="videos" aria-labelledby="videos-title">
    <div class="card body">
      <h3 id="videos-title" class="title-gradient">Videos del sistema</h3>
      <div class="yt-grid">
        <div class="yt">
          <h4 style="margin-bottom: 8px; text-align: center;">Presentación CONTPAQi Comercial Pro</h4>
          <div style="text-align:center;">
            <iframe width="560" height="315"
              src="https://www.youtube-nocookie.com/embed/-SJq6t2SM7c?rel=0&modestbranding=1&controls=1&fs=1"
              title="Presentación CONTPAQi Comercial Pro (para accesibilidad)"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
              style="border-radius:12px; max-width:100%; display:block; margin:auto;"
              loading="lazy">
            </iframe>
          </div>
        </div>
        <div class="yt">
          <h4 style="margin-bottom: 8px; text-align: center;">¿Qué hace CONTPAQi Comercial Pro?</h4>
          <div style="text-align:center;">
            <iframe width="560" height="315"
              src="https://www.youtube-nocookie.com/embed/rEYzPXOX1_Y?rel=0&modestbranding=1&controls=1&fs=1"
              title="Qué hace CONTPAQi Comercial Pro (para accesibilidad)"
              frameborder="0"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen
              style="border-radius:12px; max-width:100%; display:block; margin:auto;"
              loading="lazy">
            </iframe>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="integra" aria-labelledby="integra-title">
    <div class="lock-note">no borrar esta sección, no tocar, respetar y mantener integro</div>
    <h3 id="integra-title" class="title-gradient">Sistemas que complementan tu Comercial Pro</h3>
    <div class="card body">
      <div class="carouselX" data-step="3">
        <button class="arrowCircle prev" aria-label="Anterior"><span class="chev">‹</span></button>
        <div class="track">
          <article class="sys"><img src="../IMG/contabilidad.webp" alt="Contabilidad" loading="lazy"/><h4>CONTPAQi Contabilidad</h4><p>Genera pólizas de ventas, compras, costos y gastos.</p></article>
          <article class="sys"><img src="../IMG/bancos.webp" alt="Bancos" loading="lazy"/><h4>CONTPAQi Bancos</h4><p>Concilia pagos a proveedores y cobros a clientes.</p></article>
          <article class="sys"><img src="../IMG/xml.webp" alt="XML en Línea" loading="lazy"/><h4>CONTPAQi XML en Línea</h4><p>Descarga y valida CFDI de compras y gastos.</p></article>
          <article class="sys"><img src="../IMG/produccion.webp" alt="Producción" loading="lazy"/><h4>CONTPAQi Producción</h4><p>Planeación y control avanzado de la producción.</p></article>
          <article class="sys"><img src="../IMG/wopen.webp" alt="Wopen POS" loading="lazy"/><h4>Wopen POS</h4><p>Punto de venta avanzado para tiendas físicas.</p></article>
          <article class="sys"><img src="../IMG/vende.webp" alt="Vende" loading="lazy"/><h4>CONTPAQi Vende</h4><p>Punto de venta en la nube conectado a tu inventario.</p></article>
          <article class="sys"><img src="../IMG/nominas.webp" alt="Nóminas" loading="lazy"/><h4>CONTPAQi Nóminas</h4><p>Administra el pago a tus empleados.</p></article>
        </div>
        <button class="arrowCircle next" aria-label="Siguiente"><span class="chev">›</span></button>
        <div class="group-dots" aria-label="Paginación carrusel"></div>
      </div>
    </div>
  </section>

  <section id="calculadora-section" aria-labelledby="calc">
    <h3 id="calc" class="title-gradient">Conoce el precio de tu licencia</h3>
    <div class="calc-strip">
      <div id="app" data-system="CONTPAQi Comercial PRO" hidden></div>
      <div class="calc-row" id="calc-row">
        <div id="calc-primary" class="calc-container" aria-label="Calculadora principal"></div>

        <div id="calc-slot-2" class="placeholder">
          <div class="note">
            <strong>Integra un sistema adicional y recibe −15% en cada uno.</strong><br>
            <small>“XML en Línea” no aplica para descuento.</small>
            <div class="icons-wrap" id="icons-sec-sys"></div>
          </div>
        </div>

        <div id="calc-tertiary" class="calc-container" aria-label="Tercera calculadora"></div>

        <div id="add-more-panel" class="placeholder" style="display:none">
          <div class="note">
            <strong>¿Agregar un tercer sistema?</strong><br>
            <small>Mismo -15% por paquete (excepto “XML en Línea”).</small>
            <div class="icons-wrap" id="icons-third-sys"></div>
          </div>
        </div>
      </div>

      <div id="combined-wrap" class="combined-card" hidden>
        <h4 class="title-gradient">Resumen combinado</h4>
        <table class="combined-table"><tbody id="combined-table-body"></tbody></table>
      </div>
    </div>
  </section>

  <section id="comparativa" aria-labelledby="comparativa-title">
    <div class="lock-note">no borrar esta sección, no tocar, respetar y mantener integro</div>
    <h3 id="comparativa-title" class="title-gradient">Comparativas</h3>
    <div class="card body">
      <h4 style="margin-bottom: 15px;">CONTPAQi Comercial Pro vs Otras Marcas</h4>
      <table class="table-like">
        <thead><tr><th>Característica</th><th class="highlight">CONTPAQi C. Pro</th><th>Aspel SAE</th><th>ERP Genérico (Mediano)</th><th>Excel / Manual</th></tr></thead>
        <tbody>
          <tr><td>Inventarios (Lotes, Pedimentos, Series)</td><td class="highlight">✅ Completo</td><td>✅ (Puede requerir configuración adicional)</td><td>✅ (Generalmente incluido)</td><td>❌ Muy difícil / Propenso a errores</td></tr>
          <tr><td>Multi-Almacén</td><td class="highlight">✅ Incluido</td><td>✅ Incluido</td><td>✅ Generalmente incluido</td><td>❌ Manual / Complejo</td></tr>
          <tr><td>Ciclo Compra-Venta</td><td class="highlight">✅ Completo</td><td>✅ Completo</td><td>✅ Completo</td><td>⚠️ Parcial / Manual</td></tr>
          <tr><td>Facturación CFDI 4.0 (con Complementos)</td><td class="highlight">✅ Robusto</td><td>✅ Robusto</td><td>✅ (Puede variar cobertura de complementos)</td><td>❌ No aplica</td></tr>
          <tr><td>Interfaz Contable (Nativa)</td><td class="highlight">✅ (CONTPAQi Conta/Bancos)</td><td>⚠️ (Interfaz con COI/Banco)</td><td>⚠️ (Puede requerir desarrollo/costo)</td><td>❌ No aplica</td></tr>
          <tr><td>Facilidad de Implementación</td><td class="highlight">✅ Media</td><td>⚠️ Media-Alta</td><td>⚠️ Alta / Consultoría</td><td>✅ Baja (pero ineficiente)</td></tr>
        </tbody>
      </table>

      <h4 style="margin-top: 25px; margin-bottom: 15px;">Comparativa Versiones CONTPAQi Comercial</h4>
      <table class="table-like">
        <thead><tr><th>Característica</th><th>C. Start</th><th class="highlight">C. Pro</th><th>C. Premium</th></tr></thead>
        <tbody>
          <tr><td>Inventarios (Entradas/Salidas)</td><td>✅</td><td class="highlight">✅</td><td>✅</td></tr>
          <tr><td>Facturación CFDI 4.0</td><td>✅</td><td class="highlight">✅</td><td>✅</td></tr>
          <tr><td>Clientes y CxC</td><td>✅</td><td class="highlight">✅</td><td>✅</td></tr>
          <tr><td>Proveedores y CxP</td><td>✅</td><td class="highlight">✅</td><td>✅</td></tr>
          <tr><td>Multi-Almacén</td><td>❌</td><td class="highlight">✅</td><td>✅</td></tr>
          <tr><td>Lotes, Pedimentos, Series, Caducidades</td><td>❌</td><td class="highlight">✅</td><td>✅</td></tr>
          <tr><td>Ciclo de Compra Completo</td><td>❌</td><td class="highlight">✅</td><td>✅</td></tr>
          <tr><td>Módulo de Producción</td><td>❌</td><td>❌</td><td>✅</td></tr>
          <tr><td>Módulo de Servicios</td><td>❌</td><td>❌</td><td>✅</td></tr>
        </tbody>
      </table>
    </div>
  </section>

  <section id="faq" aria-labelledby="faq-title">
    <div class="lock-note">no borrar esta sección, no tocar, respetar y mantener integro</div>
    <h3 id="faq-title" class="title-gradient">Preguntas frecuentes</h3>
    <div class="faq-wrap" id="faqWrap">
      <details class="faq-item"><summary>¿Cuál es la principal diferencia entre Comercial Pro y Start?</summary><p>Comercial Pro añade funcionalidades avanzadas de inventarios como <strong>multi-almacén</strong>, control de <strong>lotes, pedimentos, números de serie y caducidades</strong>, además de un ciclo de compras más completo (requisiciones, órdenes de compra). Start es ideal para un control más básico.</p></details>
      <details class="faq-item"><summary>¿Puedo controlar productos importados con Comercial Pro?</summary><p>Sí, gracias al manejo de <strong>pedimentos</strong>, puedes registrar la información aduanal de tus productos importados y mantener la trazabilidad requerida.</p></details>
      <details class="faq-item"><summary>¿Es útil para empresas que manejan alimentos o medicamentos?</summary><p>Definitivamente. El control de <strong>lotes y caducidades</strong> es fundamental para estos giros, permitiendo gestionar fechas de vencimiento y asegurar la rotación adecuada del inventario.</p></details>
      <details class="faq-item"><summary>¿Cómo maneja el sistema diferentes almacenes?</summary><p>Puedes definir múltiples almacenes o bodegas y registrar movimientos (entradas, salidas, traspasos) entre ellos, manteniendo un control preciso de las existencias en cada ubicación.</p></details>
      <details class="faq-item"><summary>¿Se integra con sistemas de punto de venta (POS)?</summary><p>Sí, Comercial Pro puede integrarse con soluciones como Wopen POS (de CONTPAQi) u otros sistemas POS a través de interfaces o desarrollos específicos para sincronizar ventas e inventarios.</p></details>
    </div>
  </section>

  <section id="sesion-guiada" class="card body">
    <div class="lock-note">no borrar esta sección, no tocar, respetar y mantener integro</div>
    <h3 class="title-gradient">¿Listo para empezar?</h3>
    <p>Agenda una sesión con nuestros especialistas o tramita tu prueba sin costo.</p>
    <div style="display:flex;gap:10px;flex-wrap:wrap;justify-content:center">
      <a class="btn btn-grad-blue" href="https://wa.me/5568437918?text=Hola%21%20Quiero%20agendar%20una%20sesi%C3%B3n%20guiada%20de%2045%20minutos%20por%20Zoom%20para%20Comercial%20Pro" target="_blank" rel="noopener">Agendar sesión guiada (45 min)</a>
      <a class="btn btn-grad-green" href="https://wa.me/5568437918?text=Hola%20Expiriti%2C%20quiero%20comprar%20mi%20licencia%20de%20CONTPAQi%20Comercial%20Pro" target="_blank" rel="noopener">Comprar ahora</a>
    </div>
  </section>

  <aside class="toc collapsed" id="toc" aria-label="Mapa del sitio">
    <button class="toc-toggle" id="tocToggle" aria-label="Abrir mapa">🗺️ Mapa</button>
    <button class="toc-close" aria-label="Cerrar">×</button>
    <strong class="toc-title">Mapa del sitio</strong>
    <a href="#caracteristicas">¿Por qué CONTPAQi?</a>
    <a href="#videos">Vídeos</a>
    <a href="#integra">Sistemas integrables</a>
    <a href="#calculadora-section">Precio</a>
    <a href="#comparativa">Comparativa</a>
    <a href="#faq">Preguntas frecuentes</a>
    <a href="#sesion-guiada">Demo</a>
  </aside>
</main>

<footer>
  <div class="container footer-grid">
    <div>
      <h3 class="footer-title">Contacto</h3>
      <div class="contact-list">
        <div class="item"><span class="ico">📍</span><span><strong>Ubicación:</strong> Insurgentes Sur 1188, CDMX</span></div>
        <div class="item"><span class="ico">☎️</span><span><strong>Tel:</strong> <a href="tel:+525568437917">55 6843 7917</a> · <a href="tel:+525568437918">55 6843 7918</a></span></div>
        <div class="item"><span class="ico">✉️</span><span><strong>Mail:</strong> <a href="mailto:andree@expiriti.com.mx">andree@expiriti.com.mx</a></span></div>
      </div>
    </div>
    <div>
      <h3 class="footer-title">Formas de pago</h3>
      <div class="payments-grid"><img src="../IMG/pasarela-2.webp" alt="Métodos de pago" loading="lazy"></div>
    </div>
    <div>
      <h3 class="footer-title">Marcas</h3>
      <div class="brands-col">
        <div class="brand-item"><img src="../IMG/CONTPAQi.webp" alt="Logo CONTPAQi" loading="lazy"></div>
        <div class="brand-item"><img src="../IMG/Microsoft.webp" alt="Logo Microsoft" loading="lazy"></div>
      </div>
    </div>
    <div class="ally-col">
      <h3 class="footer-title" style="justify-self:end">Aliados</h3>
      <img src="../IMG/bni.webp" alt="BNI" loading="lazy">
      <img src="../IMG/fucam.webp" alt="FUCAM" loading="lazy">
      <img src="../IMG/expiritilogo.webp" alt="Expiriti" loading="lazy">
    </div>
  </div>
  <div class="container footer-bottom">
    <div style="display:flex;align-items:center;gap:10px">
      <img src="../IMG/expiritilogo.webp" alt="Expiriti" style="width:34px;height:34px;border-radius:8px" loading="lazy">
      <div><strong>Expiriti</strong><div class="hint">© <span id="year"></span> · Todos los derechos reservados</div></div>
    </div>
    <div class="hint">Aviso de privacidad · Términos</div>
  </div>
</footer>

<script>
// Año y menú móvil
document.getElementById('year').textContent=new Date().getFullYear();
document.getElementById('burger')?.addEventListener('click',()=>{document.getElementById('mobileMenu')?.classList.toggle('open');});

// TOC (Mapa)
(function(){
  const toc=document.getElementById('toc'), openBtn=document.getElementById('tocToggle'), closeBtn=toc?.querySelector('.toc-close');
  if(!toc||!openBtn||!closeBtn) return;
  openBtn.addEventListener('click',e=>{e.stopPropagation();toc.classList.toggle('collapsed');});
  closeBtn.addEventListener('click',()=>toc.classList.add('collapsed'));
  toc.querySelectorAll('a').forEach(a=>a.addEventListener('click',()=>toc.classList.add('collapsed')));
  document.addEventListener('click',e=>{if(!toc.contains(e.target) && e.target!==openBtn) toc.classList.add('collapsed');});
})();

// Galería portada
(function(){
  const root=document.getElementById('carousel1'); if(!root) return;
  const track=root.querySelector('.carousel-track'),
        dots=[...root.querySelectorAll('.carousel-nav .dot')],
        prev=root.querySelector('.arrowCircle.prev'),
        next=root.querySelector('.arrowCircle.next');
  let idx=0;
  function setActive(i){
    if(dots.length===0) return;
    idx=(i+dots.length)%dots.length;
    dots.forEach((d,di)=>d.classList.toggle('active',di===idx));
    track.scrollTo({left: track.clientWidth*idx, behavior:'smooth'});
  }
  dots.forEach((d,i)=>d.addEventListener('click',()=>setActive(i)));
  prev.addEventListener('click',()=>setActive(idx-1));
  next.addEventListener('click',()=>setActive(idx+1));
  track.addEventListener('scroll',()=>{
    const i=Math.round(track.scrollLeft/track.clientWidth);
    if(dots.length>0 && i!==idx && i<dots.length){
      dots.forEach((d,di)=>d.classList.toggle('active',di===i));
      idx=i;
    }
  });
  window.addEventListener('resize',()=>setActive(idx));
  setActive(0);
})();

// Carrusel Reels
(function(){
  const root=document.getElementById('carouselReels'); if(!root) return;
  const track=root.querySelector('.carousel-track'),
        dots=[...root.querySelectorAll('#carouselReels .carousel-nav .dot')],
        reelTitles=[...document.querySelectorAll('.reel-title')];
  const prev=root.querySelector('#carouselReels .arrowCircle.prev'),
        next=root.querySelector('#carouselReels .arrowCircle.next');
  let idx=0;
  function setActive(i){
    if(dots.length===0) return;
    idx=(i+dots.length)%dots.length;
    dots.forEach((d,di)=>d.classList.toggle('active',di===idx));
    track.scrollTo({left: track.clientWidth*idx, behavior:'smooth'});
    reelTitles.forEach((t,ti)=>t.classList.toggle('active',ti===idx));
  }
  dots.forEach((d,i)=>d.addEventListener('click',()=>setActive(i)));
  prev.addEventListener('click',()=>setActive(idx-1));
  next.addEventListener('click',()=>setActive(idx+1));
  track.addEventListener('scroll',()=>{
    const i=Math.round(track.scrollLeft/track.clientWidth);
    if(dots.length>0 && i!==idx && i<dots.length){
      dots.forEach((d,di)=>d.classList.toggle('active',di===i));
      reelTitles.forEach((t,ti)=>t.classList.toggle('active',ti===i));
      idx=i;
    }
  });
  window.addEventListener('resize',()=>setActive(idx));
  setActive(0);
})();

// Slider Por qué usar
(function(){
  const wrap=document.querySelector('#beneficios .listSlider'); if(!wrap) return;
  const track=wrap.querySelector('.listTrack'), prev=wrap.querySelector('.prev'), next=wrap.querySelector('.next');
  let page=0, total=track.children.length;
  function go(i){page=(i+total)%total; track.scrollTo({left: wrap.clientWidth*page, behavior:'smooth'});}
  prev.addEventListener('click',()=>go(page-1)); next.addEventListener('click',()=>go(page+1));
  window.addEventListener('resize',()=>go(page));
})();

// Carrusel sistemas integrables (agrupado por 3)
(function(){
  document.querySelectorAll('.carouselX').forEach(root=>{
    const track=root.querySelector('.track'),
          prev=root.querySelector('.arrowCircle.prev'),
          next=root.querySelector('.arrowCircle.next'),
          dotsWrap=root.querySelector('.group-dots');
    function groupW(){return track.clientWidth;}
    function groupsCount(){const n=track.querySelectorAll('.sys').length; return Math.max(1, Math.ceil(n/3));}
    function setDot(i){dots.forEach((d,idx)=>d.classList.toggle('active',idx===i));}
    function goTo(i){track.scrollTo({left:i*groupW(),behavior:'smooth'}); setDot(i);}
    dotsWrap.innerHTML='';
    const dots=Array.from({length:groupsCount()},(_,i)=>{
      const b=document.createElement('button'); b.className='dot'+(i===0?' active':'');
      b.addEventListener('click',()=>goTo(i));
      dotsWrap.appendChild(b); return b;
    });
    let idx=0;
    prev.addEventListener('click',()=>{idx=Math.max(0,idx-1); goTo(idx);});
    next.addEventListener('click',()=>{idx=Math.min(dots.length-1,idx+1); goTo(idx);});
    window.addEventListener('resize',()=>goTo(idx));
  });
})();

// Píldoras (filtros)
(function(){
  const pills=[...document.querySelectorAll('.pill')];
  const cards=[...document.querySelectorAll('.feature-grid .fcard')];
  function apply(filter){
    cards.forEach(c=>{
      const show =
        (filter==='inventarios' && c.classList.contains('tag-inventarios')) ||
        (filter==='compras_ventas' && c.classList.contains('tag-compras_ventas')) ||
        (filter==='finanzas' && c.classList.contains('tag-finanzas'));
      c.style.display = show ? '' : 'none';
    });
  }
  pills.forEach(p=>{
    p.addEventListener('click',()=>{
      pills.forEach(x=>{x.classList.remove('active'); x.setAttribute('aria-pressed','false');});
      p.classList.add('active'); p.setAttribute('aria-pressed','true');
      apply(p.dataset.filter);
    });
  });
  apply('inventarios'); // Filtro inicial
})();

// ====== Calculadora helpers ======
function hasPrices(systemName){return !!(window.preciosContpaqi && window.preciosContpaqi[systemName]);}

// Catálogo visual (coincide con precios-contpaqi.js)
const CATALOG_SISTEMAS = [
  { name: "CONTPAQi Contabilidad", img: "../IMG/contabilidad.webp" },
  { name: "CONTPAQi Bancos",       img: "../IMG/bancos.webp" },
  { name: "CONTPAQi Nóminas",      img: "../IMG/nominas.webp" },
  { name: "CONTPAQi XML en Línea", img: "../IMG/xml.webp", noDiscount: true },
  { name: "CONTPAQi Comercial START",  img: "../IMG/comercialstart.webp" },
  { name: "CONTPAQi Comercial PREMIUM",img: "../IMG/comercialpremium.webp"},
  { name: "CONTPAQi Factura Electrónica", img: "../IMG/factura.webp" }
];

// Precio “desde”
function getPrecioDesde(systemName){
  const db = (window.preciosContpaqi && window.preciosContpaqi[systemName]) || null;
  if(!db) return null;
  if (db.anual?.MultiRFC?.precio_base || db.anual?.MultiRFC?.renovacion)
    return Number(db.anual.MultiRFC.precio_base || db.anual.MultiRFC.renovacion || 0);
  if (db.anual?.MonoRFC?.precio_base || db.anual?.MonoRFC?.renovacion)
    return Number(db.anual.MonoRFC.precio_base || db.anual.MonoRFC.renovacion || 0);
  if (db.tradicional?.actualizacion?.precio_base)
    return Number(db.tradicional.actualizacion.precio_base);
  return null;
}
const moneyMX = new Intl.NumberFormat("es-MX", { style:"currency", currency:"MXN", maximumFractionDigits:0 });

// Estado selección
const selected = { secondary: null, tertiary: null };
function selectedSet(){ return new Set([selected.secondary, selected.tertiary].filter(Boolean)); }

// Render pickers con exclusiones
function renderSistemasPicker(containerId, exclude = new Set(), activeName = null){
  const wrap = document.getElementById(containerId);
  if(!wrap) return;
  wrap.innerHTML = "";
  const primarySys = document.getElementById('app')?.dataset?.system;
  if(primarySys) exclude.add(primarySys);

  CATALOG_SISTEMAS.forEach(item=>{
    if (exclude.has(item.name)) return;
    const precio = getPrecioDesde(item.name);
    const btn = document.createElement("button");
    btn.className = "sys-icon";
    btn.type = "button";
    btn.dataset.sys = item.name;
    btn.title = item.name;
    btn.innerHTML = `
      ${item.noDiscount ? '<small class="sin15">sin -15%</small>' : ''}
      <img src="${item.img}" alt="${item.name}" loading="lazy">
      <strong>${item.name.replace('CONTPAQi ','')}</strong>
      <small class="sys-price">${precio != null ? 'desde '+moneyMX.format(precio) : 'precio no disp.'}</small>
    `;
    if (activeName && activeName === item.name) btn.classList.add('active');
    wrap.appendChild(btn);
  });
}

// Resumen combinado
function renderCombinedTable(rows){
  const wrap=document.getElementById('combined-wrap');
  const tbody=document.getElementById('combined-table-body');
  if(!wrap||!tbody) return;
  tbody.innerHTML='';
  rows.forEach(([concepto, importe])=>{
    const tr=document.createElement('tr');
    const td1=document.createElement('td'); td1.textContent=concepto;
    const td2=document.createElement('td'); td2.textContent=importe; td2.style.textAlign='right';
    tr.appendChild(td1); tr.appendChild(td2); tbody.appendChild(tr);
  });
  wrap.hidden=false;
}

// Inicialización calculadoras
document.addEventListener("DOMContentLoaded", ()=>{
  const row=document.getElementById('calc-row'),
        slot2=document.getElementById('calc-slot-2'),
        slot3=document.getElementById('calc-tertiary'),
        addMore=document.getElementById('add-more-panel');
  const pick2=document.getElementById('icons-sec-sys'),
        pick3=document.getElementById('icons-third-sys');
  const primarySystem = document.getElementById('app')?.dataset?.system;

  // Render inicial de pickers
  const initialExclude = new Set(primarySystem ? [primarySystem] : []);
  renderSistemasPicker("icons-sec-sys", initialExclude);
  renderSistemasPicker("icons-third-sys", initialExclude);

  function refreshPickers(){
    const ex = selectedSet();
    if(primarySystem) ex.add(primarySystem);
    renderSistemasPicker("icons-sec-sys", ex, selected.secondary);
    renderSistemasPicker("icons-third-sys", ex, selected.tertiary);
  }

  function showAddMoreIfReady(){
    if(addMore) addMore.style.display = selected.secondary ? '' : 'none';
  }

  // Secundaria
  pick2?.addEventListener('click', e=>{
    const btn=e.target.closest('.sys-icon'); if(!btn) return;
    const sys=btn.dataset.sys; if(!hasPrices(sys)) return;
    selected.secondary = sys;
    selected.tertiary  = selected.tertiary === sys ? null : selected.tertiary;
    slot2.className='calc-container'; slot2.id='calc-secondary';
    CalculadoraContpaqi.setSecondarySystem(sys,{
      secondarySelector:'#calc-secondary',
      combinedSelector:'#combined-wrap',
      onCombined:renderCombinedTable
    });
    refreshPickers();
    showAddMoreIfReady();
  });

  // Terciaria
  pick3?.addEventListener('click', e=>{
    const btn=e.target.closest('.sys-icon'); if(!btn) return;
    const sys=btn.dataset.sys; if(!hasPrices(sys)) return;
    if (sys === selected.secondary) return;
    selected.tertiary = sys;
    slot3.style.display='block';
    CalculadoraContpaqi.setTertiarySystem(sys,{
      tertiarySelector:'#calc-tertiary',
      combinedSelector:'#combined-wrap',
      onCombined:renderCombinedTable
    });
    if(addMore) addMore.style.display='none';
    row.classList.add('has-three');
    refreshPickers();
  });

  // Núcleo: primaria
  if(!window.CalculadoraContpaqi){
    console.error('❌ calculadora.js no cargó. Verifica ruta.');
  }else{
    const app=document.getElementById('app');
    const sys=app?.dataset?.system;
    if(sys){
      window.CalculadoraContpaqi.init({
        systemName: sys,
        primarySelector:'#calc-primary',
        combinedSelector:'#combined-wrap'
      });
    }
  }
});
</script>

<script defer src="../precios-contpaqi.js?v=3"></script>
<script defer src="../calculadora.js?v=13"></script>
</body>
</html>
